{% extends 'base.html' %}
{% load i18n %}
{% load account socialaccount %}

{% block content %}
<style>
    /* --- NEON SIGNUP WRAPPER --- */
    .neon-signup-wrapper {
        min-height: 85vh;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        padding: 20px;
    }

    .neon-signup-card {
        width: 100%;
        max-width: 480px;
        padding: 40px;
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 28px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        position: relative;
        z-index: 1;
    }

    /* Logo & Header */
    .signup-header { text-align: center; margin-bottom: 30px; }
    .neon-logo-box {
        display: inline-flex; align-items: center; gap: 10px; margin-bottom: 15px;
    }
    .neon-icon {
        width: 40px; height: 40px;
        background: linear-gradient(135deg, #4f46e5, #9333ea);
        border-radius: 10px;
        display: flex; align-items: center; justify-content: center;
        color: white; box-shadow: 0 0 15px rgba(79, 70, 229, 0.4);
    }
    .signup-title { font-size: 24px; font-weight: 800; color: #fff; margin: 0; }

    /* Social Buttons */
    .social-group { display: flex; gap: 12px; margin-bottom: 25px; }
    .social-btn {
        flex: 1; background: white; color: #0f172a; border: none; padding: 10px;
        border-radius: 50px; font-size: 14px; font-weight: 600; text-decoration: none;
        display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s;
    }
    .social-btn:hover { transform: translateY(-2px); background: #f8fafc; }

    .divider { color: #64748b; font-size: 11px; font-weight: 700; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; }

    /* Form Elements */
    .neon-input-group { margin-bottom: 18px; text-align: left; }
    .neon-input-group label { color: #94a3b8; font-size: 13px; font-weight: 600; margin-bottom: 8px; display: block; }

    .neon-field {
        width: 100%; padding: 12px 16px;
        background: rgba(0, 0, 0, 0.3) !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
        border-radius: 12px; color: #fff !important; font-size: 15px; outline: none; transition: 0.3s;
    }
    .neon-field:focus { border-color: #4f46e5 !important; box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2); }

    .btn-neon-signup {
        width: 100%; padding: 14px; margin-top: 10px;
        background: linear-gradient(90deg, #4f46e5, #7c3aed);
        border: none; border-radius: 50px; color: white; font-weight: 700;
        box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4); cursor: pointer; transition: 0.3s;
    }
    .btn-neon-signup:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(124, 58, 237, 0.5); }

    /* Terms checkbox custom neon style */
    .neon-checkbox-group {
        display: flex; align-items: flex-start; gap: 10px; margin: 20px 0;
        color: #94a3b8; font-size: 13px; cursor: pointer;
    }
    .neon-checkbox-group input { width: auto; margin-top: 3px; accent-color: #4f46e5; }

    .bottom-link { margin-top: 25px; font-size: 14px; color: #94a3b8; text-align: center; }
    .bottom-link a { color: #818cf8; text-decoration: none; font-weight: 600; }

    /* Errors */
    .error-msg { color: #f87171; font-size: 12px; margin-top: 5px; }
</style>

<div class="neon-signup-wrapper">
    <div class="neon-signup-card">

        <div class="signup-header">
            <div class="neon-logo-box">
                <div class="neon-icon"><i class="fas fa-play"></i></div>
                <h2 class="signup-title">DevTube</h2>
            </div>
            <p class="text-muted small">Dasturchilar hamjamiyatiga qo'shiling</p>
        </div>

        <div class="social-group">
            <a href="{% provider_login_url 'google' process='connect' %}" class="social-btn">
                <i class="fab fa-google" style="color: #DB4437;"></i> Google
            </a>
            <a href="{% provider_login_url 'github' process='connect' %}" class="social-btn">
                <i class="fab fa-github" style="color: #333;"></i> GitHub
            </a>
        </div>

        <div class="divider text-center">yoki email orqali</div>

        <form method="POST" action="{% url 'account_signup' %}">
            {% csrf_token %}

            {% for field in form %}
                <div class="neon-input-group">
                    <label>{{ field.label }}</label>
                    {{ field }}
                    {% if field.help_text %}
                        <small class="text-muted d-block mt-1" style="font-size: 11px;">{{ field.help_text }}</small>
                    {% endif %}
                    {% for error in field.errors %}
                        <div class="error-msg"><i class="fas fa-circle-exclamation"></i> {{ error }}</div>
                    {% endfor %}
                </div>
            {% endfor %}

            <label class="neon-checkbox-group">
                <input type="checkbox" required name="terms">
                <span>Men <a href="#" style="color: #818cf8;">Foydalanish shartlari</a> va maxfiylik siyosatiga roziman.</span>
            </label>

            <button type="submit" class="btn-neon-signup">
                AKKAUNT YARATISH
            </button>
        </form>

        <div class="bottom-link">
            Akkauntingiz bormi? <a href="{% url 'account_login' %}">Kiring</a>
        </div>
    </div>
</div>

<script>
    // Barcha inputlarga neon-field klassini avtomatik qo'shish
    document.querySelectorAll('input, select, textarea').forEach(e => {
        if (e.type !== 'checkbox') {
            e.classList.add('neon-field');
        }
    });
</script>
{% endblock %}